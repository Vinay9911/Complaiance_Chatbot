<body class="bg-light">
    <div class="container py-5">
        <h2 class="mb-4">Hardware Compliance Roadmap (India)</h2>
        <div class="input-group mb-3">
            <input type="text" id="pname" class="form-control" placeholder="e.g. Smart Watch or Drone">
            <button onclick="check()" class="btn btn-primary">Analyze Compliance</button>
        </div>
        <div id="results" class="mt-4"></div>
    </div>

    <script>
        async function check() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = "Analysing...";
            
            const name = document.getElementById('pname').value;
            const res = await fetch('/api/check', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name: name})
            });
            const data = await res.json();
            
            let html = `<div class="card p-4 shadow-sm">`;
            
            // 1. Show AI Synthesis
            html += `<h4>Expert Analysis</h4>`;
            html += `<div class="mb-4" style="white-space: pre-wrap;">${data.answer}</div>`;
            
            // 2. Show Quick Reference (from Master Map)
            if(data.is_known) {
                html += `<div class="alert alert-info">
                            <b>Quick Ref:</b> Standard: ${data.rule.standard} | Auth: ${data.rule.authority}
                         </div>`;
            }
            
            html += `</div>`;
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>